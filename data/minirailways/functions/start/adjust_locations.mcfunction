execute as @e[type=marker,x=0,tag=mr.Spawner,tag=mr.Source,tag=mr.ToRemove] at @s run summon marker ~ ~ ~ {Tags:["mr.Spawner", "mr.replacement", "mr.Source", "mr.new", "mr.ToRemove"]}
execute as @e[type=marker,x=0,tag=mr.Spawner,tag=mr.Destination,tag=mr.ToRemove] at @s run summon marker ~ ~ ~ {Tags:["mr.Spawner", "mr.replacement", "mr.Destination", "mr.new", "mr.ToRemove"]}
execute as @e[type=marker,x=0,tag=mr.Spawner,tag=mr.ToRemove,tag=!mr.replacement] run kill @s
execute as @e[type=marker,x=0,tag=mr.Spawner,tag=mr.ToRemove] run tag @s remove mr.replacement
execute as @e[type=marker,x=0,tag=mr.Spawner,tag=mr.ToRemove] at @s run function minirailways:start/randomize_position
execute as @e[type=marker,x=0,tag=mr.Source,tag=mr.ToRemove] at @s unless entity @e[type=marker,tag=mr.Spawner,tag=mr.Generated,distance=..2] if entity @e[type=marker,tag=mr.Destination,tag=!mr.Generated,distance=..35] if block ~ 1 ~ air if block ~ 2 ~ air if block ~ 3 ~ air run tag @s remove mr.ToRemove
execute as @e[type=marker,x=0,tag=mr.Destination,tag=mr.ToRemove] at @s unless entity @e[type=marker,tag=mr.Spawner,tag=mr.Generated,distance=..2] if block ~ 1 ~ air if block ~ 2 ~ air if block ~ 3 ~ air run tag @s remove mr.ToRemove